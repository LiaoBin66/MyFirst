<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>返利计算器</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>返利计算器</h1>
  </header>
  <main>
    <label>初始本金（$）</label>
    <input type="number" id="initial" placeholder="例如：1000" />

    <label>每日收益率（例如0.01表示1%）</label>
    <input type="number" id="rate" placeholder="例如：0.01" step="0.001" />

    <label>杠杆倍数</label>
    <input type="number" id="leverage" placeholder="例如：3" />

    <label>每日目标返利金额（$）</label>
    <input type="number" id="target" placeholder="例如：100" value="100" />

    <button onclick="calculate()">开始计算</button>
    
    <p id="output"></p>
  </main>

  <script>
    function calculate() {
      let initial = parseFloat(document.getElementById("initial").value);
      let rate = parseFloat(document.getElementById("rate").value);
      let leverage = parseFloat(document.getElementById("leverage").value);
      let target = parseFloat(document.getElementById("target").value);  // 用户自定义目标
      let capital = initial * leverage;
      let dailyReturn = capital * rate;
      let totalReturn = 0;
      let days = 0;
      let reinvests = 0;

      while (dailyReturn < target) {
        let todayReturn = capital * rate;
        totalReturn += todayReturn;
        capital -= todayReturn;
        if (totalReturn >= target) {
          let reinvestTimes = Math.floor(totalReturn / target);
          capital += reinvestTimes * target * leverage;
          reinvests += reinvestTimes;
          totalReturn -= reinvestTimes * target;
        }
        dailyReturn = capital * rate;
        days++;
      }

      document.getElementById("output").innerText =
        `达到每日返还 $${target} 需要 ${days} 天，共复投 ${reinvests} 次。`;
    }
  </script>
</body>
</html>
